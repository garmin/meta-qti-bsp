From fc8dfc9315f07e4e8b956de385f4e64e92578a9c Mon Sep 17 00:00:00 2001
From: Lily Li <lali@codeaurora.org>
Date: Thu, 4 Jul 2019 11:16:12 +0800
Subject: [PATCH 1/4] gst-plugins-base: add NV12_UBWC and RGBA_UBWC

Change-Id: I1bd908dd5e81cfd7e3f19ee1595633e39b011a12
Signed-off-by: Lily Li <lali@codeaurora.org>
---
 gst-libs/gst/video/video-format.c | 4 ++++
 gst-libs/gst/video/video-format.h | 6 +++++-
 2 files changed, 9 insertions(+), 1 deletion(-)

diff --git a/gst-libs/gst/video/video-format.c b/gst-libs/gst/video/video-format.c
index d1b8bd4..1bcc2a8 100644
--- a/gst-libs/gst/video/video-format.c
+++ b/gst-libs/gst/video/video-format.c
@@ -5670,6 +5670,10 @@ static const VideoFormat formats[] = {
   MAKE_RGBA_LE_PACK_FORMAT (BGR10A2_LE, "raw video", DPTH10_10_10_2, PSTR4444,
       PLANE0,
       OFFS0, SUB4444, PACK_BGR10A2_LE),
+  MAKE_YUV_FORMAT (NV12_UBWC, "raw video", GST_MAKE_FOURCC ('N', 'V', '1', '2'),
+      DPTH888, PSTR122, PLANE011, OFFS001, SUB420, PACK_NV12),
+  MAKE_RGBA_FORMAT (RGBA_UBWC, "raw video", DPTH8888, PSTR4444, PLANE0, OFFS0123,
+      SUB4444, PACK_RGBA),
 };
 
 static GstVideoFormat
diff --git a/gst-libs/gst/video/video-format.h b/gst-libs/gst/video/video-format.h
index 30189b2..6099c40 100644
--- a/gst-libs/gst/video/video-format.h
+++ b/gst-libs/gst/video/video-format.h
@@ -118,6 +118,8 @@ G_BEGIN_DECLS
  * @GST_VIDEO_FORMAT_Y410: packed 4:4:4 YUV, 10 bits per channel(A-V-Y-U...) (Since: 1.16)
  * @GST_VIDEO_FORMAT_VUYA: packed 4:4:4 YUV with alpha channel (V0-U0-Y0-A0...) (Since: 1.16)
  * @GST_VIDEO_FORMAT_BGR10A2_LE: packed 4:4:4 RGB with alpha channel(B-G-R-A), 10 bits for R/G/B channel and MSB 2 bits for alpha channel (Since: 1.16)
+ * @GST_VIDEO_FORMAT_NV12_UBWC: NV12 compressed
+ * @GST_VIDEO_FORMAT_RGBA_UBWC: RGBA compressed
  *
  * Enum value describing the most common video formats.
  *
@@ -211,6 +213,8 @@ typedef enum {
   GST_VIDEO_FORMAT_Y410,
   GST_VIDEO_FORMAT_VUYA,
   GST_VIDEO_FORMAT_BGR10A2_LE,
+  GST_VIDEO_FORMAT_NV12_UBWC,
+  GST_VIDEO_FORMAT_RGBA_UBWC,
 } GstVideoFormat;
 
 #define GST_VIDEO_MAX_PLANES 4
@@ -562,7 +566,7 @@ gconstpointer  gst_video_format_get_palette          (GstVideoFormat format, gsi
   "A420_10LE, A422_10BE, A422_10LE, A444_10BE, A444_10LE, NV61, P010_10BE, " \
   "P010_10LE, IYU2, VYUY, GBRA, GBRA_10BE, GBRA_10LE, BGR10A2_LE, GBR_12BE, GBR_12LE, " \
   "GBRA_12BE, GBRA_12LE, I420_12BE, I420_12LE, I422_12BE, I422_12LE, " \
-  "Y444_12BE, Y444_12LE, GRAY10_LE32, NV12_10LE32, NV16_10LE32, NV12_10LE40 }"
+  "Y444_12BE, Y444_12LE, GRAY10_LE32, NV12_10LE32, NV16_10LE32, NV12_10LE40, NV12_UBWC, RGBA_UBWC }"
 
 /**
  * GST_VIDEO_CAPS_MAKE:
-- 
2.7.4

